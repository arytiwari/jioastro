<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>North-Indian Chart — One Label / House (Safe Boxes)</title>
<style>
  :root{ --fg:#111; }
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f4f7fb; margin:0; padding:24px;}
  .wrap { max-width: 880px; margin:0 auto; background:#fff; border:1px solid #e3e6ef; border-radius:14px; box-shadow:0 10px 24px rgba(0,0,0,.06); }
  .hdr { padding:14px 18px; border-bottom:1px solid #eee; font-weight:800; }
  .pad { padding:18px; }
  .house-label { fill:#111; text-anchor: middle; dominant-baseline: middle; font-weight: 800; }
  .grid-line   { stroke: var(--fg); stroke-width: 1.5; fill: none; }
  .outer-box   { stroke: var(--fg); stroke-width: 2; fill: #fff; }
  .muted-line  { stroke: #333; stroke-width: 1; }
  .safe { stroke:#c7ceda; fill: none; stroke-dasharray: 5 5; }
</style>
</head>
<body>
  <div class="wrap">
    <div class="hdr">North-Indian (Diamond) Birth Chart — ONE Label per House (Safe Boxes)</div>
    <div class="pad">
      <svg id="chart" viewBox="0 0 800 800" width="100%" height="100%"></svg>
    </div>
  </div>

<script>
function el(tag, attrs={}) { const e=document.createElementNS('http://www.w3.org/2000/svg',tag); for(const k in attrs) e.setAttribute(k, attrs[k]); return e; }
function line(p1,p2,cls){ return el('line',{x1:p1.x,y1:p1.y,x2:p2.x,y2:p2.y,class:cls}); }
function poly(points,cls){ return el('polyline',{points:points.map(p=>`${p.x},${p.y}`).join(' '),class:cls}); }

function buildGrid(svg, W=800, H=800, pad=24){
  svg.innerHTML='';
  const g=el('g'); svg.appendChild(g);
  const xm=W/2, ym=H/2;
  const TL={x:pad,y:pad}, TR={x:W-pad,y:pad}, BR={x:W-pad,y:H-pad}, BL={x:pad,y:H-pad};
  const MT={x:xm,y:pad}, MR={x:W-pad,y:ym}, MB={x:xm,y:H-pad}, ML={x:pad,y:ym}, CT={x:xm,y:ym};

  // Frame + diamond + diagonals
  g.appendChild(line(TL,TR,'outer-box'));
  g.appendChild(line(TR,BR,'outer-box'));
  g.appendChild(line(BR,BL,'outer-box'));
  g.appendChild(line(BL,TL,'outer-box'));
  g.appendChild(poly([MT,MR,MB,ML,MT],'grid-line'));
  g.appendChild(line(TL,CT,'muted-line'));
  g.appendChild(line(TR,CT,'muted-line'));
  g.appendChild(line(BR,CT,'muted-line'));
  g.appendChild(line(BL,CT,'muted-line'));
  g.appendChild(line(TL,MT,'muted-line'));
  g.appendChild(line(TL,ML,'muted-line'));
  g.appendChild(line(TR,MT,'muted-line'));
  g.appendChild(line(TR,MR,'muted-line'));
  g.appendChild(line(BR,MR,'muted-line'));
  g.appendChild(line(BR,MB,'muted-line'));
  g.appendChild(line(BL,MB,'muted-line'));
  g.appendChild(line(BL,ML,'muted-line'));

  // Define safe boxes fully inside each house polygon
  const aw=W-2*pad, ah=H-2*pad;
  const makeBox = (cx,cy, wFrac, hFrac)=>{
    const w=aw*wFrac, h=ah*hFrac;
    return {cx, cy, w, h, x:cx-w/2, y:cy-h/2};
  };
  const cx=(t)=>pad+aw*t, cy=(t)=>pad+ah*t;

  // Fractions tuned conservatively; centers placed well within each region
  const boxes=[
    {h:1,  box:makeBox(cx(0.50), cy(0.18), 0.18, 0.09)},
    {h:2,  box:makeBox(cx(0.23), cy(0.32), 0.16, 0.10)},
    {h:3,  box:makeBox(cx(0.16), cy(0.50), 0.14, 0.14)},
    {h:4,  box:makeBox(cx(0.33), cy(0.62), 0.18, 0.10)},
    {h:5,  box:makeBox(cx(0.34), cy(0.82), 0.18, 0.09)},
    {h:6,  box:makeBox(cx(0.50), cy(0.87), 0.18, 0.09)},
    {h:7,  box:makeBox(cx(0.50), cy(0.71), 0.18, 0.10)},
    {h:8,  box:makeBox(cx(0.66), cy(0.82), 0.18, 0.09)},
    {h:9,  box:makeBox(cx(0.84), cy(0.50), 0.14, 0.14)},
    {h:10, box:makeBox(cx(0.67), cy(0.62), 0.18, 0.10)},
    {h:11, box:makeBox(cx(0.77), cy(0.32), 0.16, 0.10)},
    {h:12, box:makeBox(cx(0.50), cy(0.36), 0.18, 0.10)},
  ];

  return {g,boxes};
}

function textAt(g,x,y,str,cls,fs){
  const t=el('text',{x,y,class:cls,style:`font-size:${fs}px`}); t.textContent=str; g.appendChild(t);
}
function rect(g,box){ g.appendChild(el('rect',{x:box.x,y:box.y,width:box.w,height:box.h,class:'safe'})); }

function renderOneLabelPerHouseBoxes(target, opts={}){
  const svg=(typeof target==='string')?document.querySelector(target):target;
  const W=opts.width||800, H=opts.height||800, pad=opts.padding||24;
  svg.setAttribute('viewBox',`0 0 ${W} ${H}`);
  const {g,boxes}=buildGrid(svg,W,H,pad);
  const fs = Math.max(12, Math.floor(Math.min(W,H)/30)); // responsive font size
  boxes.forEach(({h,box})=>{
    if (opts.debug) rect(g,box);
    textAt(g, box.cx, box.cy, `H${h}`, 'house-label', fs);
  });
}

// Toggle debug boxes by passing {debug:true}
renderOneLabelPerHouseBoxes('#chart', {debug:false});
</script>
</body>
</html>
